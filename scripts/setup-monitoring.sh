#!/bin/bash

# Setup Monitoring and Analytics for AltaMedica
# Configures comprehensive monitoring across all applications

set -e

echo "ğŸ“Š Configurando Monitoring y Analytics - AltaMedica"

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[0;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

echo -e "\n${GREEN}âœ… Analytics AutomÃ¡ticamente Habilitados en Vercel:${NC}"
echo ""
echo "ğŸŒ Web-App Analytics:"
echo "   ğŸ“Š https://vercel.com/reina08s-projects/altamedica-reboot/analytics"
echo "   ğŸš€ https://vercel.com/reina08s-projects/altamedica-reboot/speed-insights"
echo ""
echo "ğŸ‘¨â€âš•ï¸ Doctors Analytics:"
echo "   ğŸ“Š https://vercel.com/reina08s-projects/doctors/analytics"
echo "   ğŸš€ https://vercel.com/reina08s-projects/doctors/speed-insights"
echo ""
echo "ğŸ‘¤ Patients Analytics:"
echo "   ğŸ“Š https://vercel.com/reina08s-projects/patients/analytics"
echo "   ğŸš€ https://vercel.com/reina08s-projects/patients/speed-insights"
echo ""
echo "ğŸ¢ Companies Analytics:"
echo "   ğŸ“Š https://vercel.com/reina08s-projects/companies/analytics"
echo "   ğŸš€ https://vercel.com/reina08s-projects/companies/speed-insights"
echo ""
echo "âš™ï¸ Admin Analytics:"
echo "   ğŸ“Š https://vercel.com/reina08s-projects/admin/analytics"
echo "   ğŸš€ https://vercel.com/reina08s-projects/admin/speed-insights"

echo -e "\n${BLUE}ğŸ“ˆ MÃ©tricas Monitoreadas AutomÃ¡ticamente:${NC}"
echo ""
echo "Core Web Vitals:"
echo "  â€¢ LCP (Largest Contentful Paint)"
echo "  â€¢ FID (First Input Delay)"  
echo "  â€¢ CLS (Cumulative Layout Shift)"
echo "  â€¢ TTFB (Time to First Byte)"
echo ""
echo "Performance:"
echo "  â€¢ Page load times"
echo "  â€¢ API response times"
echo "  â€¢ Build duration"
echo "  â€¢ Cache hit rates"
echo ""
echo "Usage:"
echo "  â€¢ Visitor counts"
echo "  â€¢ Geographic distribution"
echo "  â€¢ Device types"
echo "  â€¢ Traffic sources"

echo -e "\n${YELLOW}âš ï¸  Alertas Recomendadas (ConfiguraciÃ³n Manual):${NC}"
echo ""
echo "En cada proyecto, configurar alertas para:"
echo ""
echo "ğŸ”´ CrÃ­ticas:"
echo "  â€¢ Error Rate > 5%"
echo "  â€¢ API Response Time > 5 seconds"
echo "  â€¢ Build Failures"
echo "  â€¢ SSL Certificate Expiry"
echo ""
echo "ğŸŸ¡ Advertencias:"
echo "  â€¢ Core Web Vitals degradation"
echo "  â€¢ Build time > 10 minutes"
echo "  â€¢ Unusual traffic spikes"
echo "  â€¢ Cache miss rate > 50%"

echo -e "\n${GREEN}ğŸ” URLs de ConfiguraciÃ³n de Alertas:${NC}"
echo ""
echo "â€¢ Web-App: https://vercel.com/reina08s-projects/altamedica-reboot/settings/notifications"
echo "â€¢ Doctors: https://vercel.com/reina08s-projects/doctors/settings/notifications"  
echo "â€¢ Patients: https://vercel.com/reina08s-projects/patients/settings/notifications"
echo "â€¢ Companies: https://vercel.com/reina08s-projects/companies/settings/notifications"
echo "â€¢ Admin: https://vercel.com/reina08s-projects/admin/settings/notifications"

echo -e "\n${BLUE}ğŸ“Š Dashboard Central Recomendado:${NC}"
echo ""
echo "Para una vista unificada, considera configurar:"
echo ""
echo "â€¢ Vercel Dashboard: https://vercel.com/dashboard"
echo "â€¢ Integration con Slack para alertas crÃ­ticas"
echo "â€¢ Integration con PagerDuty para emergencias mÃ©dicas"
echo "â€¢ Custom dashboards con Grafana (opcional)"

echo -e "\n${GREEN}ğŸ¯ MÃ©tricas EspecÃ­ficas MÃ©dicas:${NC}"
echo ""
echo "Para aplicaciones mÃ©dicas, monitorear especialmente:"
echo ""
echo "ğŸ‘¨â€âš•ï¸ Doctors Portal:"
echo "  â€¢ Tiempo de carga de video calls"
echo "  â€¢ Latencia de WebRTC connections"
echo "  â€¢ Uptime durante horas mÃ©dicas"
echo ""
echo "ğŸ‘¤ Patients Portal:"
echo "  â€¢ Accesibilidad metrics"
echo "  â€¢ Mobile performance"
echo "  â€¢ Form submission success rates"
echo ""
echo "ğŸ¢ Companies Portal:"
echo "  â€¢ Crisis response times"
echo "  â€¢ Marketplace transaction success"
echo "  â€¢ Emergency alert delivery"

echo -e "\n${GREEN}âœ… Monitoring configurado y listo para usar!${NC}"
echo ""
echo "ğŸ’¡ Pro Tip: Revisar analytics semanalmente para optimizar performance."

echo -e "\n${GREEN}ğŸ‰ Setup de monitoring completado!${NC}"